<!DOCTYPE html>
<head>
  <title>Volume Visualizers</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    
  <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>-->
  <!--<script src="//code.jquery.com/jquery-1.8.3.js"></script>
  <script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

    <!-- <script src="js/vendor/jquery.hammer.js"></script> -->

  <!-- <script src="js/vendor/jquery.multitouch.js" type="text/javascript"></script>

  <script src="js/vendor/jquery.multitouch-draggable.js" type="text/javascript"></script>
  <script src="js/vendor/jquery.multitouch-scalable.js" type="text/javascript"></script>
  <script src="js/vendor/jquery.multitouch-resizable.js" type="text/javascript"></script>
  <script src="js/vendor/jquery.multitouch-rotatable.js" type="text/javascript"></script> -->

  <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i" rel="stylesheet">
  <script type="text/javascript" src="js/main.js"></script>
  <script type="text/javascript" src="d3/d3.js"></script>
  <script type="text/javascript" src="d3/topojson/topojson.js"></script>
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/smallerItems.css">

</head>

<body>
  <!-- Container for the visualization -->
  <!--<div id="vis"></div>-->

  <div class="container_fluid" id="vis_container">
    <div class="row" id="vis_container_row">
      <div class="col-md-2" style="padding-left:2%">
        <div id="welcome_div">
          <h2>Music of the World</h2>
          <p>A visualization comparing the music chart data of 38 countries around the world (from Spotify).</p>
        </div>
        <div id="timelineDiv">
          <div id="timelineDivInner">
            <h2 id="timelineHeader">Filter Time</h2>
            <p>Use the slider below to focus on a particular time or range of times.</p>
            <div id="timeline_title">
              <span class="headingTwoText" style="font-weight:700;">2017</span>
            </div>
            <div>
              <div id="sliderLabelsWrapper">
              </div>
              <div id="sliderWrapper">
                <div id="slider-range"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-10">
        <div id="divContainer">
          <div class="row" id="map_container_row">
            <div class="col-md-12">
              <div id="bubbleMapOutermost">
                <div id = "bubbleMapView">
                  <!--<button id="show" onclick="show()">Show</button>-->
                  <div class="row" id="bubble_map_panel">
                    <div class="col-md-6 bubble_map_title_area">
                      <h2>World Preferences</h2>
                      <p>What kinds of music do different countries prefer? Use the dropdown to specify features.</p>
                    </div>
                    <div class="col-md-2"></div>
                    <div class="col-md-4">
                      <div id="bubbleDropDownMenuContainer">
                        <div id="bubbleDropDown" style="display: table-cell; width: 120;">
                          <label for="dropDownAudioFeatures">Audio Features: </label>
                          <select id="dropDownAudioFeatures" onchange="updateCountryDataOnFeatureChange()">
                            <option value="valence">Valence</option>
                            <option value="energy">Energy</option>
                            <option value="liveness">Liveness</option>
                            <option value="tempo">Tempo</option>
                            <option value="speechiness">Speechiness</option>
                            <option value="acousticness">Acousticness</option>
                            <option value="danceability">Danceability</option>
                            <option value="loudness">Loudness</option>
                          </select> 
                        </div>
                      </div>
                    </div>

                  </div>


                  <div id = "bubbleMapDiv_1" class="continentDiv" ></div>
                  <div id = "bubbleMapDiv_2" class="continentDiv" ></div>
                  <div id = "bubbleMapDiv_3" class="continentDiv" ></div>
                  <!--<div id = "BubbleMapLegend">
                    <p id = "minValue"> </p>
                    <p id = "maxValue"> </p>
                  </div>
                  <div id = "LegendDetails">
                    <p id= "legendText"> </p>
                  </div>-->
                  <div id = "bubbleMap">

                    <div class="feature_hidden">
                      <h2>HOVER FOR MORE INFORMATION</h2>
                      <h1>What is <strong id="currently_selected_bubble">Valence</strong>?</h1>
                      <p class="feature_descriptor" id="bubble_map_definition"><strong>Valence</strong> describes whether something is likely to make someone feel happy (positive valence) or sad (negative valence).</p>
                    </div>
        <!--                 <img src="basemap.svg" width="100%", height="95%"/> 
     -->          </div>
                  <div id="country_selected_area">
                    <h2>COUNTRY SELECTED</h2>
                    <h1 id="country_selected_area_actual_text">None</h1>
                  </div>
                  <div id="scatterplot_hover_legend">
                    <h2 style="margin-bottom:1px; padding-top:3px;">RELATIVE POPULARITY</h2>
                    <img id="circles_legend" src="circles_legend.svg"/>
                    <h2 style="margin-bottom:1px;">LESS &nbsp&nbsp&nbsp SAME &nbsp&nbsp&nbsp MORE</h2>
                    <h2>WEEKS ON CHARTS</h2>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row" id="below_container_row" style="position:relative">
            <svg id="limiter_container" width="100%" height="100%" style="position:absolute; z-index:2; pointer-events: none">
              <rect id="limiter_container_rect" width="100%" height="100%" style="fill:rgba(1,16,21,.6); position:absolute; rx:3px; ry:3px;"/>
              <h1 id="limiter_container_text"style="position:absolute; z-index:2; pointer-events:none; color:white; font-size:2.0rem; text-align:center; height:100%; width:80%; top:40%; left:10%; font-weight: 300;">Please select a country above to learn more about its popular music.</h1>
            </svg>

            <div class="col-md-6" id="audio_features_container">

              <div id="audioFeaturesScatterDiv">
                <div class="row" id="audio_features_panel">
                  <div class="col-md-7 audio_features_title_area">
                      <h2>Popular Song Features</h2>
                      <p>What are the features of the most popular songs for <strong id="audio_features_country">country</strong>?</p>
                  </div>
                  <div class="col-md-5">
                    <!--<div style="display: table-cell; width: 120;">
                      <label for="ydropdownScatter">Y-axis: </label><select id="ydropdownScatter">
                        <option val="weeksOnCharts">Weeks On Charts</option>
                      </select>
                    </div>-->
                    <div class="dropdownMenuContainer">
                      <label for="xdropdownScatter" style="width:50px;">X-axis: </label><select id="xdropdownScatter" onchange="updateKeyForAudioScatter()">
                        <option value="valence">Valence</option>
                        <option value="energy">Energy</option>
                        <option value="liveness">Liveness</option>
                        <option value="tempo">Tempo</option>
                        <option value="speechiness">Speechiness</option>
                        <option value="acousticness">Acousticness</option>
                        <option value="danceability">Danceability</option>
                        <option value="loudness">Loudness</option>
                      </select>
                    </div>
                    <div>
                      <label for="colordropdownScatter" style="width:50px;">Color: </label><select id="colordropdownScatter" onchange="updateKeyForAudioScatter()">
                        <option value="none">None</option>
                        <option value="valence">Valence</option>
                        <option value="energy">Energy</option>
                        <option value="liveness">Liveness</option>
                        <option value="tempo">Tempo</option>
                        <option value="speechiness">Speechiness</option>
                        <option value="acousticness">Acousticness</option>
                        <option value="danceability">Danceability</option>
                        <option value="loudness">Loudness</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="row" id="audio_features_feature_descriptor">
                  <div class="col-md-6">
                    <p id="scatterplot_x_definition"><strong>Valence</strong> describes whether something is likely to make someone feel happy (positive valence) or sad (negative valence).</p>
                  </div>
                  <div class="col-md-6">
                    <p id="scatterplot_color_definition"></p>
                  </div>
                </div>

                <!--<div style="display: table-cell; width: 150;">
                  <button id="updateAudioFeatScatter" onclick="testUpdate()">Update</button>
                </div>-->
              </div>
            </div>
            <div class="col-md-6" id="music_chart_container">
              <div id="divBelowBubbleMap">
                <div id="lifeOfMusicHitDiv">
                  <div class="row" id="music_chart_panel">
                    <div class="col-md-7 music_chart_title_area">
                      <h2>Chart Performance</h2>
                      <p>How did each song perform on that country's charts?</p>
                    </div>
                    <div class="col-md-5">
                      <button class="btn btn-dark" id="clear_music_chart_songs" onclick="clearButtonClicked()">Clear Songs</button>
                    </div>
                  </div>

                </div>

              </div>
            </div>
        </div>
      </div>
    </div>
  </div>

  <!--<div id="countryListDiv"></div>-->
</body>

<script type="text/javascript" src="js/bubbleMap.js"></script>
<script type="text/javascript" src="js/bubbleMapNew.js"></script>
<script type="text/javascript" src="js/audioFeaturesScatter.js"></script>
<script type="text/javascript" src="js/audioScatterNew.js"></script>
<script type="text/javascript" src="js/MultiLineChart.js"></script>
<script type="text/javascript" src="js/lineChart.js"></script>
<script type="text/javascript" src="js/timeline.js"></script>
<script type="text/javascript" src="js/countryData.js"></script>
<script type="text/javascript" src="js/definitionSelector.js"></script>


<script type="text/javascript">

  var globalCountryCode = "";
  //var globalWeekMap = [0, 4, 8, 13, 17, 
  //                     21, 26, 30, 34, 38, 40]

  var globalWeekMap = [-1, 0, 4, 8, 13, 17, 
                  21, 26, 30, 34, 39];

  var globalWeekStringMap = ['2017-01-06', '2017-01-13', '2017-01-20', '2017-01-27', '2017-02-03', '2017-02-10', '2017-02-17', '2017-02-24', '2017-03-03', '2017-03-10', '2017-03-17', '2017-03-24', '2017-03-31', '2017-04-07', '2017-04-14', '2017-04-21', '2017-04-28', '2017-05-05', '2017-05-12', '2017-05-19', '2017-05-26', '2017-06-02', '2017-06-09', '2017-06-16', '2017-06-23', '2017-06-30', '2017-07-07', '2017-07-14', '2017-07-21', '2017-07-28', '2017-08-04', '2017-08-11', '2017-08-18', '2017-08-25', '2017-09-01', '2017-09-08', '2017-09-15', '2017-09-22', '2017-09-29', '2017-10-06', '2017-10-13'];

  var startMonthNoGlobal; 
  var endMonthNoGlobal;

  var songsListData = {}; 
  var weeklyCharts = {}; 
  var audioFeaturesMapGlobal = {}

  var globalDataForAudioScatter = null; 

  var globalCurrentBubbleClickedId = null;


  loadCountryData(); //load up complete data sync

  //console.log(Object.keys(songsListData).length); 

  initiateTimelineSlider();

  //loadLineChart()

  //show(0);
  

</script>
</html>